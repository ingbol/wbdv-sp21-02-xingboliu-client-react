{"ast":null,"code":"var _jsxFileName = \"/Users/liuxingbo/webdev/2021/spring/02/wbdv-sp21-02-xingboliu-client-react/src/components/course-editor/widgets/widget-list.js\",\n    _s = $RefreshSig$();\n\nimport { useParams } from \"react-router-dom\";\nimport React, { useEffect, useState } from 'react';\nimport ParagraphWidget from \"./paragraph-widget\";\nimport HeadingWidget from \"./heading-widget\";\nimport widgetService from \"../../../services/widget-service\";\nimport { connect } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst WidgetList = ({\n  widgets = [],\n  findWidgetsForTopic,\n  createWidget,\n  updateWidget,\n  deleteWidget\n}) => {\n  _s();\n\n  const {\n    layout,\n    courseId,\n    moduleId,\n    lessonId,\n    topicId,\n    widgetId\n  } = useParams();\n  useEffect(() => findWidgetsForTopic(topicId), [topicId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n      onClick: () => {\n        if (topicId !== \"undefined\" && typeof topicId !== \"undefined\") createWidget(topicId);\n      },\n      className: \"fas fa-plus fa-2x float-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"List-group pl-0\",\n      children: widgets.map(widget => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item\",\n        children: [widget.type === \"HEADING\" && /*#__PURE__*/_jsxDEV(HeadingWidget, {\n          updateWidget: updateWidget,\n          deleteWidget: deleteWidget,\n          widget: widget\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 33\n        }, this), widget.type === \"PARAGRAPH\" && /*#__PURE__*/_jsxDEV(ParagraphWidget, {\n          updateWidget: updateWidget,\n          deleteWidget: deleteWidget,\n          widget: widget\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 33\n        }, this)]\n      }, widget.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, this);\n};\n\n_s(WidgetList, \"zJeOyjawWwkybsJ5rdeFP1yl2zY=\", false, function () {\n  return [useParams];\n});\n\n_c = WidgetList;\n\nconst stpm = state => {\n  return {\n    widgets: state.widgetReducer.widgets\n  };\n};\n\nconst dtpm = dispatch => {\n  return {\n    createWidget: tid => {\n      widgetService.createWidget(tid, {\n        type: \"HEADING\",\n        size: 1,\n        text: \"New Widget\",\n        widgetOrder: \"1\"\n      }).then(actualWidget => dispatch({\n        type: \"CREATE_WIDGET\",\n        widget: actualWidget\n      }));\n    },\n    deleteWidget: wid => {\n      widgetService.deleteWidget(wid).then(status => dispatch({\n        type: \"DELETE_WIDGET\",\n        wid\n      }));\n    },\n    updateWidget: (wid, widget) => {\n      widgetService.updateWidget(wid, widget).then(status => dispatch({\n        type: \"UPDATE_WIDGET\",\n        wid,\n        widget\n      }));\n    },\n    findWidgetsForTopic: tid => {\n      widgetService.findWidgetsForTopic(tid).then(actualWidgets => dispatch({\n        type: \"FIND_ALL_WIDGETS_FOR_LESSON\",\n        widgets: actualWidgets\n      }));\n    }\n  };\n};\n\nexport default connect(stpm, dtpm)(WidgetList);\n\nvar _c;\n\n$RefreshReg$(_c, \"WidgetList\");","map":{"version":3,"sources":["/Users/liuxingbo/webdev/2021/spring/02/wbdv-sp21-02-xingboliu-client-react/src/components/course-editor/widgets/widget-list.js"],"names":["useParams","React","useEffect","useState","ParagraphWidget","HeadingWidget","widgetService","connect","WidgetList","widgets","findWidgetsForTopic","createWidget","updateWidget","deleteWidget","layout","courseId","moduleId","lessonId","topicId","widgetId","map","widget","type","id","stpm","state","widgetReducer","dtpm","dispatch","tid","size","text","widgetOrder","then","actualWidget","wid","status","actualWidgets"],"mappings":"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","sourcesContent":["import {useParams} from \"react-router-dom\";\nimport React, {useEffect, useState} from 'react'\nimport ParagraphWidget from \"./paragraph-widget\";\nimport HeadingWidget from \"./heading-widget\";\nimport widgetService from \"../../../services/widget-service\"\nimport {connect} from \"react-redux\";\n\nconst WidgetList = (\n    {\n        widgets = [],\n        findWidgetsForTopic,\n        createWidget,\n        updateWidget,\n        deleteWidget\n}) => {\n    const {layout, courseId, moduleId, lessonId, topicId, widgetId} = useParams();\n    useEffect(() => findWidgetsForTopic(topicId), [topicId])\n\n    return (\n        <div>\n            <i onClick={() => {\n                if(topicId !== \"undefined\" && typeof topicId !== \"undefined\")\n                    createWidget(topicId)}\n            }\n               className=\"fas fa-plus fa-2x float-right\"></i>\n            <ul className=\"List-group pl-0\">\n                {\n                    widgets.map(widget =>\n                    <li className=\"list-group-item\" key={widget.id}>\n                        {\n                            widget.type === \"HEADING\" &&\n                                <HeadingWidget\n                                    updateWidget={updateWidget}\n                                    deleteWidget={deleteWidget}\n                                    widget={widget}\n                                />\n                        }\n                        {\n                            widget.type === \"PARAGRAPH\" &&\n                                <ParagraphWidget\n                                    updateWidget={updateWidget}\n                                    deleteWidget={deleteWidget}\n                                    widget={widget}\n                                />\n                        }\n                    </li>\n                    )\n                }\n            </ul>\n        </div>\n    )\n}\n\nconst stpm = (state) => {\n    return {\n        widgets: state.widgetReducer.widgets\n    }\n}\n\nconst dtpm = (dispatch) => {\n    return {\n        createWidget: (tid) => {\n            widgetService.createWidget(tid, {type: \"HEADING\", size: 1, text: \"New Widget\", widgetOrder: \"1\"})\n                .then(actualWidget => dispatch({\n                    type: \"CREATE_WIDGET\",\n                    widget: actualWidget\n                }))\n        },\n        deleteWidget: (wid) => {\n            widgetService.deleteWidget(wid)\n                .then(status => dispatch({\n                    type: \"DELETE_WIDGET\",\n                    wid\n                }))\n        },\n        updateWidget: (wid, widget) => {\n            widgetService.updateWidget(wid, widget)\n                .then(status => dispatch({\n                    type: \"UPDATE_WIDGET\",\n                    wid,\n                    widget\n                }))\n        },\n        findWidgetsForTopic: (tid) => {\n            widgetService.findWidgetsForTopic(tid)\n                .then(actualWidgets => dispatch({\n                    type: \"FIND_ALL_WIDGETS_FOR_LESSON\",\n                    widgets: actualWidgets\n                }))\n        }\n    }\n}\n\nexport default connect(stpm, dtpm)(WidgetList);"]},"metadata":{},"sourceType":"module"}